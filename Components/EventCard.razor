@using EventEase.Models

@if (EventData != null)
{
    <div class="event-card">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">@GetEventName()</h5>
                <div class="card-text">
                    <p>
                        <strong>Date:</strong> @GetFormattedDate()
                    </p>
                    <p>
                        <strong>Location:</strong> @GetLocation()
                    </p>
                </div>
                <div class="card-actions">
                    <a href="/event/@EventData.Id" class="btn btn-primary">View Details</a>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <div class="event-card">
        <div class="card">
            <div class="card-body">
                <p class="text-muted">Event data not available</p>
            </div>
        </div>
    </div>
}

@code {
    [Parameter, EditorRequired]
    public Event? EventData { get; set; }

    private string GetEventName()
    {
        return !string.IsNullOrWhiteSpace(EventData?.Name) 
            ? EventData.Name 
            : "Untitled Event";
    }

    private string GetFormattedDate()
    {
        if (EventData?.Date == null || EventData.Date == default)
        {
            return "Date TBD";
        }
        
        try
        {
            return EventData.Date.ToString("MMMM dd, yyyy");
        }
        catch
        {
            return "Invalid Date";
        }
    }

    private string GetLocation()
    {
        return !string.IsNullOrWhiteSpace(EventData?.Location) 
            ? EventData.Location 
            : "Location TBD";
    }
}
